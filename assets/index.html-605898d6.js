import{_ as e,M as p,p as o,q as c,R as n,t as s,N as t,a1 as i}from"./framework-d3922052.js";const l={},u=n("h1",{id:"esp8266-使用-mdns",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#esp8266-使用-mdns","aria-hidden":"true"},"#"),s(" ESP8266 使用 mDNS")],-1),r=n("h2",{id:"_1-什么是-mdns",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_1-什么是-mdns","aria-hidden":"true"},"#"),s(" 1. 什么是 mDNS")],-1),d=n("p",null,[s("mDNS 可以在没有 DNS 服务器的情况下在内网就可以访问域名。域名的后缀必须是 "),n("code",null,".local"),s("，而且需要设备支持 mDNS 才可以。Android 和 iOS 大部分不支持，PC 端大多支持。")],-1),k={href:"https://blog.alexsun.top/vuepress-network-notes/application-layer-protocol/dns/mdns.html",target:"_blank",rel:"noopener noreferrer"},m=n("h2",{id:"_2-esp8266-开启-mdns",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_2-esp8266-开启-mdns","aria-hidden":"true"},"#"),s(" 2. ESP8266 开启 mDNS")],-1),v=n("p",null,"安装 ESP8266 库后就包含了 mDNS 库，所以可以直接使用。",-1),h={href:"https://github.com/esp8266/Arduino/blob/master/libraries/ESP8266mDNS/examples/mDNS_Web_Server/mDNS_Web_Server.ino",target:"_blank",rel:"noopener noreferrer"},_=i(`<div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token comment">// 引入 mDNS 库</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;ESP8266mDNS.h&gt;</span></span>

<span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 连接 WiFi 后开启 mDNS 服务</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>WiFi<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> WL_CONNECTED<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 使用后将可以通过 http://dht22-esp8266.local/ 访问</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>MDNS<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token string">&quot;dht22-esp8266&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;MDNS started&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            MDNS<span class="token punctuation">.</span><span class="token function">addService</span><span class="token punctuation">(</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;tcp&quot;</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;MDNS failed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 每次循环时都进行更新</span>
    MDNS<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    server<span class="token punctuation">.</span><span class="token function">handleClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),b={href:"http://dht22-esp8266.local/",target:"_blank",rel:"noopener noreferrer"};function S(f,N){const a=p("ExternalLinkIcon");return o(),c("div",null,[u,r,d,n("p",null,[s("关于 mDNS 的详细信息可阅读我的 "),n("a",k,[s("mDNS 笔记"),t(a)]),s("。")]),m,v,n("p",null,[s("可参考 "),n("a",h,[s("示例代码"),t(a)]),s("。")]),_,n("p",null,[s("配置后可以通过 "),n("a",b,[s("http://dht22-esp8266.local/"),t(a)]),s(" 来访问 ESP8266 提供的服务。")])])}const g=e(l,[["render",S],["__file","index.html.vue"]]);export{g as default};
