import{_ as p,M as o,p as i,q as c,R as n,t as s,N as t,a1 as e}from"./framework-bafc524a.js";const l={},u=e('<h1 id="wifimanager-自动配网" tabindex="-1"><a class="header-anchor" href="#wifimanager-自动配网" aria-hidden="true">#</a> WiFiManager 自动配网</h1><h2 id="_1-自动配网" tabindex="-1"><a class="header-anchor" href="#_1-自动配网" aria-hidden="true">#</a> 1. 自动配网</h2><h3 id="_1-1-为什么需要自动配网" tabindex="-1"><a class="header-anchor" href="#_1-1-为什么需要自动配网" aria-hidden="true">#</a> 1.1 为什么需要自动配网</h3><p>我们一般在代码中配置 WiFi 的名称和密码，当我们需要切换 WiFi 时还需要重新烧录代码，非常不方便。自动配网可以使我们适配需要的 WiFi 而不需要重写代码。</p>',4),r={href:"https://github.com/tzapu/WiFiManager",target:"_blank",rel:"noopener noreferrer"},d=e(`<h3 id="_1-2-wifimanager-的安装" tabindex="-1"><a class="header-anchor" href="#_1-2-wifimanager-的安装" aria-hidden="true">#</a> 1.2 WiFiManager 的安装</h3><p>安装库：在 Arduino IDE 中搜索 <code>WiFiManager tzapu</code> 可以找到对应库，安装稳定版即可。</p><h3 id="_1-3-wifimanager-api" tabindex="-1"><a class="header-anchor" href="#_1-3-wifimanager-api" aria-hidden="true">#</a> 1.3 WiFiManager API</h3><table><thead><tr><th>常用接口</th><th>功能</th></tr></thead><tbody><tr><td><code>wifiManager.resetSettings()</code></td><td>清除配置信息</td></tr><tr><td><code>wifiManager.autoConnect(ssid, [passwd])</code></td><td>开启热点</td></tr></tbody></table><h2 id="_2-清除-wifi-信息" tabindex="-1"><a class="header-anchor" href="#_2-清除-wifi-信息" aria-hidden="true">#</a> 2. 清除 WiFi 信息</h2><p>为了防止原有 WiFi 信息影响程序运行，或测试 WiFiManager 效果，先清除原 WiFi 信息：</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;ESP8266WebServer.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;ESP8266WiFi.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;WiFiManager.h&gt;</span></span>

<span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Serial<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token number">115200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 创建 WiFiManager 对象</span>
    WiFiManager wifiManager<span class="token punctuation">;</span>

    <span class="token comment">// 清除 ESP8266 所存储的 WiFi 连接信息</span>
    wifiManager<span class="token punctuation">.</span><span class="token function">resetSettings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ESP8266 WiFi settings cleared!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-使用自动配网" tabindex="-1"><a class="header-anchor" href="#_3-使用自动配网" aria-hidden="true">#</a> 3. 使用自动配网</h2><p>如果配置信息里面的 WiFi 可以正确连接，那么热点将不会开启。</p><p>热点开启后，打开手机或笔记本电脑的 WiFi，连接后会提示此 WiFi 需要认证，点击认证即可进入配置界面。</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;ESP8266WebServer.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;ESP8266WiFi.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;WiFiManager.h&gt;</span></span>

<span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Serial<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token number">115200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 创建 WiFiManager 对象</span>
    WiFiManager wifiManager<span class="token punctuation">;</span>

    <span class="token comment">// 现在将尝试自动连接 WiFi</span>
    <span class="token comment">// 如果连接失败，则自动开启热点，热点名称为 AutoConnectAP</span>
    <span class="token comment">// 热点密码为 PasswordAP</span>
    wifiManager<span class="token punctuation">.</span><span class="token function">autoConnect</span><span class="token punctuation">(</span><span class="token string">&quot;AutoConnectAP&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;PasswordAP&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// WiFi 连接成功后执行下面的代码</span>
    Serial<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;ESP8266 Connected to &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// WiFi 名称</span>
    Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>WiFi<span class="token punctuation">.</span><span class="token function">SSID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Serial<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;IP address:\\t&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// IP 地址</span>
    Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>WiFi<span class="token punctuation">.</span><span class="token function">localIP</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果不需要密码，去掉 <code>passwd</code> 参数即可：</p><div class="language-cpp" data-ext="cpp"><pre class="language-cpp"><code>wifiManager<span class="token punctuation">.</span><span class="token function">autoConnect</span><span class="token punctuation">(</span><span class="token string">&quot;AutoConnectAP&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_4-自定义-wifi-配置页面" tabindex="-1"><a class="header-anchor" href="#_4-自定义-wifi-配置页面" aria-hidden="true">#</a> 4. 自定义 WiFi 配置页面</h2><p>我们可以修改 <code>WiFiManager.h</code> 来修改内容，只需修改下面内容即可。</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token keyword">const</span> <span class="token keyword">char</span> HTTP_HEADER<span class="token punctuation">[</span><span class="token punctuation">]</span> PROGMEM          <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">char</span> HTTP_STYLE<span class="token punctuation">[</span><span class="token punctuation">]</span> PROGMEM           <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">char</span> HTTP_SCRIPT<span class="token punctuation">[</span><span class="token punctuation">]</span> PROGMEM          <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">char</span> HTTP_HEADER_END<span class="token punctuation">[</span><span class="token punctuation">]</span> PROGMEM      <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">char</span> HTTP_PORTAL_OPTIONS<span class="token punctuation">[</span><span class="token punctuation">]</span> PROGMEM  <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">char</span> HTTP_ITEM<span class="token punctuation">[</span><span class="token punctuation">]</span> PROGMEM            <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">char</span> HTTP_FORM_START<span class="token punctuation">[</span><span class="token punctuation">]</span> PROGMEM      <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">char</span> HTTP_FORM_PARAM<span class="token punctuation">[</span><span class="token punctuation">]</span> PROGMEM      <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">char</span> HTTP_FORM_END<span class="token punctuation">[</span><span class="token punctuation">]</span> PROGMEM        <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">char</span> HTTP_SCAN_LINK<span class="token punctuation">[</span><span class="token punctuation">]</span> PROGMEM       <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">char</span> HTTP_SAVED<span class="token punctuation">[</span><span class="token punctuation">]</span> PROGMEM           <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">char</span> HTTP_END<span class="token punctuation">[</span><span class="token punctuation">]</span> PROGMEM             <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,16),k={href:"https://github.com/taichi-maker/WiFiManager/blob/master/WiFiManager.h",target:"_blank",rel:"noopener noreferrer"},v=n("h2",{id:"参考",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#参考","aria-hidden":"true"},"#"),s(" 参考")],-1),h={href:"http://www.taichi-maker.com/homepage/esp8266-nodemcu-iot/iot-c/esp8266-tips/wifimanager/",target:"_blank",rel:"noopener noreferrer"};function m(g,b){const a=o("ExternalLinkIcon");return i(),c("div",null,[u,n("p",null,[n("a",r,[s("WiFiManager"),t(a)]),s(" 库就是一个自动配网库，可以帮助我们自动配置 WiFi 信息。")]),d,n("p",null,[s("修改案例可以参见 "),n("a",k,[s("GitHub: taichi-maker/WiFiManager"),t(a)]),s("。")]),v,n("ol",null,[n("li",null,[s("太极创客，"),n("a",h,[s("http://www.taichi-maker.com/homepage/esp8266-nodemcu-iot/iot-c/esp8266-tips/wifimanager/"),t(a)])])])])}const _=p(l,[["render",m],["__file","index.html.vue"]]);export{_ as default};
