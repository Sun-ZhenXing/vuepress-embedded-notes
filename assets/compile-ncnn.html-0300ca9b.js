import{_ as c,M as o,p as k,q as i,R as s,N as a,V as e,t as n,a1 as t}from"./framework-8980b429.js";const u={},m=s("h1",{id:"编译-ncnn",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#编译-ncnn","aria-hidden":"true"},"#"),n(" 编译 NCNN")],-1),d={class:"table-of-contents"},b=t(`<h2 id="_1-编译-cmake" tabindex="-1"><a class="header-anchor" href="#_1-编译-cmake" aria-hidden="true">#</a> 1. 编译 CMake</h2><p>NCNN 编译要求 CMake 版本大于 3.13（当前 2023-02-02），而 Ubuntu 18 源很快停止维护，将维持 3.10 版本，所以我们需要从源码安装。</p><p>卸载 CMake：</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token function">apt-get</span> remove cmake
</code></pre></div><p>安装 OpenSSL 库：</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> openssl libssl-dev
</code></pre></div>`,6),v={href:"https://cmake.org/download/",target:"_blank",rel:"noopener noreferrer"},g=t(`<div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token function">wget</span> https://github.com/Kitware/CMake/releases/download/v3.25.2/cmake-3.25.2.tar.gz
<span class="token function">tar</span> xzvf cmake-3.25.2.tar.gz
<span class="token builtin class-name">cd</span> cmake-3.25.2
</code></pre></div><p>编译安装：</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>./bootstrap
<span class="token function">make</span> <span class="token parameter variable">-j</span> <span class="token variable"><span class="token variable">$(</span>nproc<span class="token variable">)</span></span>
<span class="token function">sudo</span> <span class="token function">make</span> <span class="token function">install</span>
</code></pre></div><p>下面测试 CMake 版本：</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>cmake <span class="token parameter variable">--version</span>
</code></pre></div><h2 id="_2-编译-ncnn" tabindex="-1"><a class="header-anchor" href="#_2-编译-ncnn" aria-hidden="true">#</a> 2. 编译 NCNN</h2><h3 id="_2-1-正常编译" tabindex="-1"><a class="header-anchor" href="#_2-1-正常编译" aria-hidden="true">#</a> 2.1 正常编译</h3><p>克隆仓库，如果克隆失败建议使用代理：</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/Tencent/ncnn.git
<span class="token builtin class-name">cd</span> ncnn
<span class="token function">git</span> submodule update <span class="token parameter variable">--init</span>
</code></pre></div><p>现在准备编译：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> build
<span class="token builtin class-name">cd</span> build
cmake <span class="token punctuation">\\</span>
    <span class="token parameter variable">-DCMAKE_BUILD_TYPE</span><span class="token operator">=</span>Release <span class="token punctuation">\\</span>
    <span class="token parameter variable">-DCMAKE_TOOLCHAIN_FILE</span><span class="token operator">=</span><span class="token punctuation">..</span>/toolchains/jetson.toolchain.cmake <span class="token punctuation">\\</span>
    <span class="token parameter variable">-DNCNN_VULKAN</span><span class="token operator">=</span>ON <span class="token punctuation">\\</span>
    <span class="token parameter variable">-DNCNN_SIMPLEOCV</span><span class="token operator">=</span>ON <span class="token punctuation">\\</span>
    <span class="token parameter variable">-DNCNN_BUILD_EXAMPLES</span><span class="token operator">=</span>ON <span class="token punctuation">\\</span>
    <span class="token punctuation">..</span>
<span class="token function">make</span> <span class="token parameter variable">-j</span> <span class="token variable"><span class="token variable">$(</span>nproc<span class="token variable">)</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,11),_={class:"hint-container warning"},h=s("p",{class:"hint-container-title"},"CUDA 错误",-1),x=s("code",null,"-DNCNN_SIMPLEOCV=ON",-1),f=t(`<h3 id="_2-2-使用-clang-套件" tabindex="-1"><a class="header-anchor" href="#_2-2-使用-clang-套件" aria-hidden="true">#</a> 2.2 使用 Clang 套件</h3><p>需要编辑 <code>jetson.toolchain.cmake</code> 来禁用默认的 GCC 套件：</p><div class="language-cmake" data-ext="cmake"><pre class="language-cmake"><code><span class="token comment"># set(CMAKE_C_COMPILER &quot;aarch64-linux-gnu-gcc&quot;)</span>
<span class="token comment"># set(CMAKE_CXX_COMPILER &quot;aarch64-linux-gnu-g++&quot;)</span>

<span class="token comment"># set \${CMAKE_C_FLAGS} and \${CMAKE_CXX_FLAGS}flag for cross-compiled process</span>
<span class="token comment"># -march=armv8-a could work on Jetson, but will compile without some extra cpu features</span>
<span class="token comment"># set(CMAKE_C_FLAGS &quot;-march=native \${CMAKE_C_FLAGS}&quot;)</span>
<span class="token comment"># set(CMAKE_CXX_FLAGS &quot;-march=native \${CMAKE_CXX_FLAGS}&quot;)</span>
</code></pre></div><p>下面使用 Clang 套件编译：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>cmake <span class="token punctuation">\\</span>
    <span class="token parameter variable">-DCMAKE_CXX_COMPILER</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">which</span> clang++<span class="token variable">)</span></span> <span class="token punctuation">\\</span>
    <span class="token parameter variable">-DCMAKE_C_COMPILER</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">which</span> clang<span class="token variable">)</span></span> <span class="token punctuation">\\</span>
    <span class="token parameter variable">-DCMAKE_LINKER</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">which</span> lld<span class="token variable">)</span></span> <span class="token punctuation">\\</span>
    <span class="token parameter variable">-DCMAKE_BUILD_TYPE</span><span class="token operator">=</span>Release <span class="token punctuation">\\</span>
    <span class="token parameter variable">-DCMAKE_TOOLCHAIN_FILE</span><span class="token operator">=</span><span class="token punctuation">..</span>/toolchains/jetson.toolchain.cmake <span class="token punctuation">\\</span>
    <span class="token parameter variable">-DNCNN_VULKAN</span><span class="token operator">=</span>ON <span class="token punctuation">\\</span>
    <span class="token parameter variable">-DNCNN_SIMPLEOCV</span><span class="token operator">=</span>ON <span class="token punctuation">\\</span>
    <span class="token parameter variable">-DNCNN_BUILD_EXAMPLES</span><span class="token operator">=</span>ON <span class="token punctuation">\\</span>
    <span class="token punctuation">..</span>
<span class="token function">make</span> <span class="token parameter variable">-j</span> <span class="token variable"><span class="token variable">$(</span>nproc<span class="token variable">)</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5),C={class:"hint-container warning"},N=s("p",{class:"hint-container-title"},"段错误",-1),A=t(`<div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token punctuation">..</span>/examples
<span class="token punctuation">..</span>/build/examples/squeezenet <span class="token punctuation">..</span>/images/128-ncnn.png
</code></pre></div><p>输出：</p><div class="language-log" data-ext="log"><pre class="language-log"><code><span class="token punctuation">[</span><span class="token number">0</span> NVIDIA Tegra X1 <span class="token operator">(</span>nvgpu<span class="token operator">)</span><span class="token punctuation">]</span>  queueC<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">]</span>  queueG<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">]</span>  queueT<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">0</span> NVIDIA Tegra X1 <span class="token operator">(</span>nvgpu<span class="token operator">)</span><span class="token punctuation">]</span>  bugsbn1<span class="token operator">=</span><span class="token number">0</span>  bugbilz<span class="token operator">=</span><span class="token number">0</span>  bugcopc<span class="token operator">=</span><span class="token number">0</span>  bugihfa<span class="token operator">=</span><span class="token number">0</span>
<span class="token punctuation">[</span><span class="token number">0</span> NVIDIA Tegra X1 <span class="token operator">(</span>nvgpu<span class="token operator">)</span><span class="token punctuation">]</span>  fp16<span class="token operator">-</span>p<span class="token operator">/</span>s<span class="token operator">/</span>a<span class="token operator">=</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">1</span>  int8<span class="token operator">-</span>p<span class="token operator">/</span>s<span class="token operator">/</span>a<span class="token operator">=</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">1</span>
<span class="token punctuation">[</span><span class="token number">0</span> NVIDIA Tegra X1 <span class="token operator">(</span>nvgpu<span class="token operator">)</span><span class="token punctuation">]</span>  subgroup<span class="token operator">=</span><span class="token number">32</span>  basic<span class="token operator">=</span><span class="token number">1</span>  vote<span class="token operator">=</span><span class="token number">1</span>  ballot<span class="token operator">=</span><span class="token number">1</span>  shuffle<span class="token operator">=</span><span class="token number">1</span>
<span class="token number">532</span> <span class="token operator">=</span> <span class="token number">0.138184</span>
<span class="token number">920</span> <span class="token operator">=</span> <span class="token number">0.061310</span>
<span class="token number">598</span> <span class="token operator">=</span> <span class="token number">0.049622</span>
Segmentation fault <span class="token operator">(</span>core dumped<span class="token operator">)</span>
</code></pre></div><p>暂时未解决。猜测和 Vulkan 有关，未使用 Vulkan 的 CPU 版本没有此错误。</p>`,4),D=t(`<h2 id="_3-基准测试" tabindex="-1"><a class="header-anchor" href="#_3-基准测试" aria-hidden="true">#</a> 3. 基准测试</h2><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token punctuation">..</span>/benchmark
<span class="token punctuation">..</span>/build/benchmark/benchncnn <span class="token number">10</span> <span class="token variable"><span class="token variable">$(</span>nproc<span class="token variable">)</span></span> <span class="token number">0</span> <span class="token number">0</span>
</code></pre></div><p>含 Vulkan 的版本在 Jetson Nano（B01）上的测试结果如下（2023-02-02）：</p><div class="language-log line-numbers-mode" data-ext="log"><pre class="language-log"><code><span class="token punctuation">[</span><span class="token number">0</span> NVIDIA Tegra X1 <span class="token operator">(</span>nvgpu<span class="token operator">)</span><span class="token punctuation">]</span>  queueC<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">]</span>  queueG<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">]</span>  queueT<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">0</span> NVIDIA Tegra X1 <span class="token operator">(</span>nvgpu<span class="token operator">)</span><span class="token punctuation">]</span>  bugsbn1<span class="token operator">=</span><span class="token number">0</span>  bugbilz<span class="token operator">=</span><span class="token number">0</span>  bugcopc<span class="token operator">=</span><span class="token number">0</span>  bugihfa<span class="token operator">=</span><span class="token number">0</span>
<span class="token punctuation">[</span><span class="token number">0</span> NVIDIA Tegra X1 <span class="token operator">(</span>nvgpu<span class="token operator">)</span><span class="token punctuation">]</span>  fp16<span class="token operator">-</span>p<span class="token operator">/</span>s<span class="token operator">/</span>a<span class="token operator">=</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">1</span>  int8<span class="token operator">-</span>p<span class="token operator">/</span>s<span class="token operator">/</span>a<span class="token operator">=</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">1</span>
<span class="token punctuation">[</span><span class="token number">0</span> NVIDIA Tegra X1 <span class="token operator">(</span>nvgpu<span class="token operator">)</span><span class="token punctuation">]</span>  subgroup<span class="token operator">=</span><span class="token number">32</span>  basic<span class="token operator">=</span><span class="token number">1</span>  vote<span class="token operator">=</span><span class="token number">1</span>  ballot<span class="token operator">=</span><span class="token number">1</span>  shuffle<span class="token operator">=</span><span class="token number">1</span>
loop_count <span class="token operator">=</span> <span class="token number">10</span>
num_threads <span class="token operator">=</span> <span class="token number">4</span>
powersave <span class="token operator">=</span> <span class="token number">0</span>
gpu_device <span class="token operator">=</span> <span class="token number">0</span>
cooling_down <span class="token operator">=</span> <span class="token number">1</span>
          squeezenet  min <span class="token operator">=</span>    <span class="token number">9.32</span>  max <span class="token operator">=</span>    <span class="token number">9.46</span>  avg <span class="token operator">=</span>    <span class="token number">9.37</span>
     squeezenet_int8  min <span class="token operator">=</span>   <span class="token number">25.15</span>  max <span class="token operator">=</span>   <span class="token number">25.30</span>  avg <span class="token operator">=</span>   <span class="token number">25.23</span>
           mobilenet  min <span class="token operator">=</span>   <span class="token number">15.72</span>  max <span class="token operator">=</span>   <span class="token number">15.86</span>  avg <span class="token operator">=</span>   <span class="token number">15.79</span>
      mobilenet_int8  min <span class="token operator">=</span>   <span class="token number">27.42</span>  max <span class="token operator">=</span>   <span class="token number">27.72</span>  avg <span class="token operator">=</span>   <span class="token number">27.57</span>
        mobilenet_v2  min <span class="token operator">=</span>   <span class="token number">12.43</span>  max <span class="token operator">=</span>   <span class="token number">12.53</span>  avg <span class="token operator">=</span>   <span class="token number">12.48</span>
        mobilenet_v3  min <span class="token operator">=</span>   <span class="token number">13.13</span>  max <span class="token operator">=</span>   <span class="token number">13.26</span>  avg <span class="token operator">=</span>   <span class="token number">13.19</span>
          shufflenet  min <span class="token operator">=</span>   <span class="token number">10.93</span>  max <span class="token operator">=</span>   <span class="token number">11.01</span>  avg <span class="token operator">=</span>   <span class="token number">10.96</span>
       shufflenet_v2  min <span class="token operator">=</span>    <span class="token number">9.82</span>  max <span class="token operator">=</span>   <span class="token number">10.01</span>  avg <span class="token operator">=</span>    <span class="token number">9.86</span>
             mnasnet  min <span class="token operator">=</span>   <span class="token number">13.01</span>  max <span class="token operator">=</span>   <span class="token number">13.25</span>  avg <span class="token operator">=</span>   <span class="token number">13.07</span>
     proxylessnasnet  min <span class="token operator">=</span>   <span class="token number">14.27</span>  max <span class="token operator">=</span>   <span class="token number">14.41</span>  avg <span class="token operator">=</span>   <span class="token number">14.32</span>
     efficientnet_b0  min <span class="token operator">=</span>   <span class="token number">20.98</span>  max <span class="token operator">=</span>   <span class="token number">21.22</span>  avg <span class="token operator">=</span>   <span class="token number">21.09</span>
   efficientnetv2_b0  min <span class="token operator">=</span>   <span class="token number">38.90</span>  max <span class="token operator">=</span>   <span class="token number">39.22</span>  avg <span class="token operator">=</span>   <span class="token number">39.02</span>
        regnety_400m  min <span class="token operator">=</span>   <span class="token number">17.12</span>  max <span class="token operator">=</span>   <span class="token number">17.30</span>  avg <span class="token operator">=</span>   <span class="token number">17.19</span>
           blazeface  min <span class="token operator">=</span>    <span class="token number">3.24</span>  max <span class="token operator">=</span>    <span class="token number">3.29</span>  avg <span class="token operator">=</span>    <span class="token number">3.26</span>
           googlenet  min <span class="token operator">=</span>   <span class="token number">30.27</span>  max <span class="token operator">=</span>   <span class="token number">30.49</span>  avg <span class="token operator">=</span>   <span class="token number">30.34</span>
      googlenet_int8  min <span class="token operator">=</span>   <span class="token number">79.61</span>  max <span class="token operator">=</span>   <span class="token number">80.18</span>  avg <span class="token operator">=</span>   <span class="token number">79.85</span>
            resnet18  min <span class="token operator">=</span>   <span class="token number">27.47</span>  max <span class="token operator">=</span>   <span class="token number">27.57</span>  avg <span class="token operator">=</span>   <span class="token number">27.52</span>
       resnet18_int8  min <span class="token operator">=</span>   <span class="token number">59.07</span>  max <span class="token operator">=</span>   <span class="token number">59.74</span>  avg <span class="token operator">=</span>   <span class="token number">59.40</span>
             alexnet  min <span class="token operator">=</span>   <span class="token number">48.73</span>  max <span class="token operator">=</span>   <span class="token number">49.26</span>  avg <span class="token operator">=</span>   <span class="token number">48.96</span>
               vgg16  min <span class="token operator">=</span>  <span class="token number">142.72</span>  max <span class="token operator">=</span>  <span class="token number">144.31</span>  avg <span class="token operator">=</span>  <span class="token number">143.05</span>
          vgg16_int8  min <span class="token operator">=</span>  <span class="token number">286.85</span>  max <span class="token operator">=</span>  <span class="token number">288.51</span>  avg <span class="token operator">=</span>  <span class="token number">287.74</span>
            resnet50  min <span class="token operator">=</span>   <span class="token number">71.55</span>  max <span class="token operator">=</span>   <span class="token number">71.96</span>  avg <span class="token operator">=</span>   <span class="token number">71.71</span>
       resnet50_int8  min <span class="token operator">=</span>  <span class="token number">148.30</span>  max <span class="token operator">=</span>  <span class="token number">149.12</span>  avg <span class="token operator">=</span>  <span class="token number">148.60</span>
      squeezenet_ssd  min <span class="token operator">=</span>   <span class="token number">32.92</span>  max <span class="token operator">=</span>   <span class="token number">33.23</span>  avg <span class="token operator">=</span>   <span class="token number">33.05</span>
 squeezenet_ssd_int8  min <span class="token operator">=</span>   <span class="token number">65.86</span>  max <span class="token operator">=</span>   <span class="token number">66.57</span>  avg <span class="token operator">=</span>   <span class="token number">66.14</span>
       mobilenet_ssd  min <span class="token operator">=</span>   <span class="token number">34.70</span>  max <span class="token operator">=</span>   <span class="token number">35.01</span>  avg <span class="token operator">=</span>   <span class="token number">34.86</span>
  mobilenet_ssd_int8  min <span class="token operator">=</span>   <span class="token number">56.45</span>  max <span class="token operator">=</span>   <span class="token number">56.75</span>  avg <span class="token operator">=</span>   <span class="token number">56.63</span>
      mobilenet_yolo  min <span class="token operator">=</span>   <span class="token number">70.04</span>  max <span class="token operator">=</span>   <span class="token number">70.67</span>  avg <span class="token operator">=</span>   <span class="token number">70.39</span>
  mobilenetv2_yolov3  min <span class="token operator">=</span>   <span class="token number">45.47</span>  max <span class="token operator">=</span>   <span class="token number">45.76</span>  avg <span class="token operator">=</span>   <span class="token number">45.61</span>
         yolov4<span class="token operator">-</span>tiny  min <span class="token operator">=</span>   <span class="token number">66.89</span>  max <span class="token operator">=</span>   <span class="token number">67.40</span>  avg <span class="token operator">=</span>   <span class="token number">67.12</span>
           nanodet_m  min <span class="token operator">=</span>   <span class="token number">18.73</span>  max <span class="token operator">=</span>   <span class="token number">18.88</span>  avg <span class="token operator">=</span>   <span class="token number">18.81</span>
    yolo<span class="token operator">-</span>fastest<span class="token operator">-</span><span class="token number">1.1</span>  min <span class="token operator">=</span>   <span class="token number">11.22</span>  max <span class="token operator">=</span>   <span class="token number">11.39</span>  avg <span class="token operator">=</span>   <span class="token number">11.30</span>
      yolo<span class="token operator">-</span>fastestv2  min <span class="token operator">=</span>    <span class="token number">9.76</span>  max <span class="token operator">=</span>    <span class="token number">9.89</span>  avg <span class="token operator">=</span>    <span class="token number">9.81</span>
  vision_transformer  min <span class="token operator">=</span> <span class="token number">2682.28</span>  max <span class="token operator">=</span> <span class="token number">2697.72</span>  avg <span class="token operator">=</span> <span class="token number">2689.92</span>
          FastestDet  min <span class="token operator">=</span>    <span class="token number">9.94</span>  max <span class="token operator">=</span>   <span class="token number">10.10</span>  avg <span class="token operator">=</span>   <span class="token number">10.03</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>不含 Vulkan 的 CPU 版本在 Jetson Nano 上的测试结果如下（2023-02-02）：</p><div class="language-log line-numbers-mode" data-ext="log"><pre class="language-log"><code>loop_count <span class="token operator">=</span> <span class="token number">10</span>
num_threads <span class="token operator">=</span> <span class="token number">4</span>
powersave <span class="token operator">=</span> <span class="token number">0</span>
gpu_device <span class="token operator">=</span> <span class="token number">0</span>
cooling_down <span class="token operator">=</span> <span class="token number">1</span>
          squeezenet  min <span class="token operator">=</span>   <span class="token number">28.98</span>  max <span class="token operator">=</span>   <span class="token number">29.28</span>  avg <span class="token operator">=</span>   <span class="token number">29.11</span>
     squeezenet_int8  min <span class="token operator">=</span>   <span class="token number">25.10</span>  max <span class="token operator">=</span>   <span class="token number">25.53</span>  avg <span class="token operator">=</span>   <span class="token number">25.23</span>
           mobilenet  min <span class="token operator">=</span>   <span class="token number">39.80</span>  max <span class="token operator">=</span>   <span class="token number">40.09</span>  avg <span class="token operator">=</span>   <span class="token number">39.96</span>
      mobilenet_int8  min <span class="token operator">=</span>   <span class="token number">27.29</span>  max <span class="token operator">=</span>   <span class="token number">27.63</span>  avg <span class="token operator">=</span>   <span class="token number">27.49</span>
        mobilenet_v2  min <span class="token operator">=</span>   <span class="token number">31.51</span>  max <span class="token operator">=</span>   <span class="token number">31.98</span>  avg <span class="token operator">=</span>   <span class="token number">31.65</span>
        mobilenet_v3  min <span class="token operator">=</span>   <span class="token number">26.49</span>  max <span class="token operator">=</span>   <span class="token number">26.86</span>  avg <span class="token operator">=</span>   <span class="token number">26.69</span>
          shufflenet  min <span class="token operator">=</span>   <span class="token number">20.04</span>  max <span class="token operator">=</span>   <span class="token number">20.58</span>  avg <span class="token operator">=</span>   <span class="token number">20.26</span>
       shufflenet_v2  min <span class="token operator">=</span>   <span class="token number">17.02</span>  max <span class="token operator">=</span>   <span class="token number">17.60</span>  avg <span class="token operator">=</span>   <span class="token number">17.19</span>
             mnasnet  min <span class="token operator">=</span>   <span class="token number">29.49</span>  max <span class="token operator">=</span>   <span class="token number">30.02</span>  avg <span class="token operator">=</span>   <span class="token number">29.62</span>
     proxylessnasnet  min <span class="token operator">=</span>   <span class="token number">34.17</span>  max <span class="token operator">=</span>   <span class="token number">34.86</span>  avg <span class="token operator">=</span>   <span class="token number">34.42</span>
     efficientnet_b0  min <span class="token operator">=</span>   <span class="token number">59.06</span>  max <span class="token operator">=</span>   <span class="token number">59.87</span>  avg <span class="token operator">=</span>   <span class="token number">59.28</span>
   efficientnetv2_b0  min <span class="token operator">=</span>   <span class="token number">65.72</span>  max <span class="token operator">=</span>   <span class="token number">91.38</span>  avg <span class="token operator">=</span>   <span class="token number">68.73</span>
        regnety_400m  min <span class="token operator">=</span>   <span class="token number">56.01</span>  max <span class="token operator">=</span>   <span class="token number">56.48</span>  avg <span class="token operator">=</span>   <span class="token number">56.21</span>
           blazeface  min <span class="token operator">=</span>    <span class="token number">5.67</span>  max <span class="token operator">=</span>    <span class="token number">5.84</span>  avg <span class="token operator">=</span>    <span class="token number">5.74</span>
           googlenet  min <span class="token operator">=</span>   <span class="token number">90.85</span>  max <span class="token operator">=</span>   <span class="token number">91.61</span>  avg <span class="token operator">=</span>   <span class="token number">91.17</span>
      googlenet_int8  min <span class="token operator">=</span>   <span class="token number">78.91</span>  max <span class="token operator">=</span>   <span class="token number">79.58</span>  avg <span class="token operator">=</span>   <span class="token number">79.19</span>
            resnet18  min <span class="token operator">=</span>   <span class="token number">80.18</span>  max <span class="token operator">=</span>   <span class="token number">82.15</span>  avg <span class="token operator">=</span>   <span class="token number">80.64</span>
       resnet18_int8  min <span class="token operator">=</span>   <span class="token number">58.98</span>  max <span class="token operator">=</span>   <span class="token number">77.46</span>  avg <span class="token operator">=</span>   <span class="token number">61.45</span>
             alexnet  min <span class="token operator">=</span>   <span class="token number">60.00</span>  max <span class="token operator">=</span>   <span class="token number">61.35</span>  avg <span class="token operator">=</span>   <span class="token number">60.46</span>
               vgg16  min <span class="token operator">=</span>  <span class="token number">377.00</span>  max <span class="token operator">=</span>  <span class="token number">382.35</span>  avg <span class="token operator">=</span>  <span class="token number">379.10</span>
          vgg16_int8  min <span class="token operator">=</span>  <span class="token number">285.44</span>  max <span class="token operator">=</span>  <span class="token number">288.74</span>  avg <span class="token operator">=</span>  <span class="token number">286.98</span>
            resnet50  min <span class="token operator">=</span>  <span class="token number">196.79</span>  max <span class="token operator">=</span>  <span class="token number">197.87</span>  avg <span class="token operator">=</span>  <span class="token number">197.23</span>
       resnet50_int8  min <span class="token operator">=</span>  <span class="token number">148.09</span>  max <span class="token operator">=</span>  <span class="token number">149.84</span>  avg <span class="token operator">=</span>  <span class="token number">148.88</span>
      squeezenet_ssd  min <span class="token operator">=</span>   <span class="token number">82.21</span>  max <span class="token operator">=</span>   <span class="token number">82.94</span>  avg <span class="token operator">=</span>   <span class="token number">82.54</span>
 squeezenet_ssd_int8  min <span class="token operator">=</span>   <span class="token number">65.03</span>  max <span class="token operator">=</span>   <span class="token number">65.51</span>  avg <span class="token operator">=</span>   <span class="token number">65.25</span>
       mobilenet_ssd  min <span class="token operator">=</span>   <span class="token number">83.00</span>  max <span class="token operator">=</span>   <span class="token number">83.69</span>  avg <span class="token operator">=</span>   <span class="token number">83.28</span>
  mobilenet_ssd_int8  min <span class="token operator">=</span>   <span class="token number">56.43</span>  max <span class="token operator">=</span>   <span class="token number">56.95</span>  avg <span class="token operator">=</span>   <span class="token number">56.65</span>
      mobilenet_yolo  min <span class="token operator">=</span>  <span class="token number">185.10</span>  max <span class="token operator">=</span>  <span class="token number">186.02</span>  avg <span class="token operator">=</span>  <span class="token number">185.55</span>
  mobilenetv2_yolov3  min <span class="token operator">=</span>  <span class="token number">111.98</span>  max <span class="token operator">=</span>  <span class="token number">112.51</span>  avg <span class="token operator">=</span>  <span class="token number">112.23</span>
         yolov4<span class="token operator">-</span>tiny  min <span class="token operator">=</span>  <span class="token number">156.89</span>  max <span class="token operator">=</span>  <span class="token number">158.15</span>  avg <span class="token operator">=</span>  <span class="token number">157.47</span>
           nanodet_m  min <span class="token operator">=</span>   <span class="token number">40.70</span>  max <span class="token operator">=</span>   <span class="token number">41.68</span>  avg <span class="token operator">=</span>   <span class="token number">41.11</span>
    yolo<span class="token operator">-</span>fastest<span class="token operator">-</span><span class="token number">1.1</span>  min <span class="token operator">=</span>   <span class="token number">22.65</span>  max <span class="token operator">=</span>   <span class="token number">22.91</span>  avg <span class="token operator">=</span>   <span class="token number">22.79</span>
      yolo<span class="token operator">-</span>fastestv2  min <span class="token operator">=</span>   <span class="token number">18.55</span>  max <span class="token operator">=</span>   <span class="token number">18.95</span>  avg <span class="token operator">=</span>   <span class="token number">18.65</span>
  vision_transformer  min <span class="token operator">=</span> <span class="token number">3163.91</span>  max <span class="token operator">=</span> <span class="token number">3259.01</span>  avg <span class="token operator">=</span> <span class="token number">3206.24</span>
          FastestDet  min <span class="token operator">=</span>   <span class="token number">19.80</span>  max <span class="token operator">=</span>   <span class="token number">20.10</span>  avg <span class="token operator">=</span>   <span class="token number">19.90</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>下面是详细比较（平均值）：</p><table><thead><tr><th>网络名称</th><th>GPU(Vulkan) 平均</th><th>CPU 平均</th></tr></thead><tbody><tr><td>squeezenet</td><td>9.37</td><td>29.11</td></tr><tr><td>squeezenet_int8</td><td>25.23</td><td><strong>25.23</strong></td></tr><tr><td>mobilenet</td><td>15.79</td><td>39.96</td></tr><tr><td>mobilenet_int8</td><td>27.57</td><td><strong>27.49</strong></td></tr><tr><td>mobilenet_v2</td><td>12.48</td><td>31.65</td></tr><tr><td>mobilenet_v3</td><td>13.19</td><td>26.69</td></tr><tr><td>shufflenet</td><td>10.96</td><td>20.26</td></tr><tr><td>shufflenet_v2</td><td>9.86</td><td>17.19</td></tr><tr><td>mnasnet</td><td>13.07</td><td>29.62</td></tr><tr><td>proxylessnasnet</td><td>14.32</td><td>34.42</td></tr><tr><td>efficientnet_b0</td><td>21.09</td><td>59.28</td></tr><tr><td>efficientnetv2_b0</td><td>39.02</td><td>68.73</td></tr><tr><td>regnety_400m</td><td>17.19</td><td>56.21</td></tr><tr><td>blazeface</td><td>3.26</td><td>5.74</td></tr><tr><td>googlenet</td><td>30.34</td><td>91.17</td></tr><tr><td>googlenet_int8</td><td>79.85</td><td><strong>79.19</strong></td></tr><tr><td>resnet18</td><td>27.52</td><td>80.64</td></tr><tr><td>resnet18_int8</td><td>59.40</td><td>61.45</td></tr><tr><td>alexnet</td><td>48.96</td><td>60.46</td></tr><tr><td>vgg16</td><td>143.05</td><td>379.10</td></tr><tr><td>vgg16_int8</td><td>287.74</td><td><strong>286.98</strong></td></tr><tr><td>resnet50</td><td>71.71</td><td>197.23</td></tr><tr><td>resnet50_int8</td><td>148.60</td><td>148.88</td></tr><tr><td>squeezenet_ssd</td><td>33.05</td><td>82.54</td></tr><tr><td>squeezenet_ssd_int8</td><td>66.14</td><td>65.25</td></tr><tr><td>mobilenet_ssd</td><td>34.86</td><td>83.28</td></tr><tr><td>mobilenet_ssd_int8</td><td>56.63</td><td>56.65</td></tr><tr><td>mobilenet_yolo</td><td>70.39</td><td>185.55</td></tr><tr><td>mobilenetv2_yolov3</td><td>45.61</td><td>112.23</td></tr><tr><td>yolov4-tiny</td><td>67.12</td><td>157.47</td></tr><tr><td>nanodet_m</td><td>18.81</td><td>41.11</td></tr><tr><td>yolo-fastest-1.1</td><td>11.30</td><td>22.79</td></tr><tr><td>yolo-fastestv2</td><td>9.81</td><td>18.65</td></tr><tr><td>vision_transformer</td><td>2689.92</td><td>3206.24</td></tr><tr><td>FastestDet</td><td>10.03</td><td>19.90</td></tr></tbody></table>`,8);function E(I,M){const p=o("router-link"),l=o("ExternalLinkIcon"),r=o("Badge");return k(),i("div",null,[m,s("nav",d,[s("ul",null,[s("li",null,[a(p,{to:"#_1-编译-cmake"},{default:e(()=>[n("1. 编译 CMake")]),_:1})]),s("li",null,[a(p,{to:"#_2-编译-ncnn"},{default:e(()=>[n("2. 编译 NCNN")]),_:1}),s("ul",null,[s("li",null,[a(p,{to:"#_2-1-正常编译"},{default:e(()=>[n("2.1 正常编译")]),_:1})]),s("li",null,[a(p,{to:"#_2-2-使用-clang-套件"},{default:e(()=>[n("2.2 使用 Clang 套件")]),_:1})])])]),s("li",null,[a(p,{to:"#_3-基准测试"},{default:e(()=>[n("3. 基准测试")]),_:1})])])]),b,s("p",null,[n("在 "),s("a",v,[n("CMake: download"),a(l)]),n(" 页面找到最新版本，下载源代码：")]),g,s("div",_,[h,s("p",null,[a(r,{type:"danger"},{default:e(()=>[n("TODO")]),_:1}),n(" 在未指定 "),x,n(" 时将使用系统的 OpenCV，如果系统的 OpenCV 包含 CUDA 支持，那么此时需要指定 CUDA 的位置信息。但是通过各种方法仍然不能编译通过，出现找不到 CUDA 库信息的报告。当前使用 CUDA 10.2。")])]),f,s("div",C,[N,s("p",null,[a(r,{type:"danger"},{default:e(()=>[n("TODO")]),_:1}),n(" 该测试使用 Clang 套件，并包含 Vulkan 支持，执行任何测试程序输出结果后不能正确停止，抛出段错误：")]),A]),D])}const q=c(u,[["render",E],["__file","compile-ncnn.html.vue"]]);export{q as default};
